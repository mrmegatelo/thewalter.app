{% extends 'base.html' %}
{% load humanize %}

{% block title %}Walter{% endblock %}

{% block content %}
    {% include 'blocks/page-heading.html' with heading='Your feed' %}
    <div class="feed-wrapper subgrid spread">
        <section class="feed-menu spread">
            <a
                    class="button"
                    href="{% url 'new_feed' %}"
            >
                Add new feed source
            </a>
        </section>
        <section class="feed-list subgrid spread">
            {% regroup feeditem_list by pub_day as feeditems %}
            {% for date, feed_items in feeditems %}
                <section class="feed">
                    <header class="feed-header">
                        <h2 class="heading">
                            {{ date|naturalday|title }}
                        </h2>
                    </header>
                    <ul class="feed-links-list">
                        {% for entry in feed_items %}
                            <li class="feed-links-list-item">
                                <div class="feed-links-list-item__link">
                                    <a href="{{ entry.link }}" target="_blank">{{ entry.title }}</a>
                                </div>
                                <div class="feed-links-list-item__controls">
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </section>
            {% endfor %}
        </section>
    </div>
    <nav class="pagination spread">
        {% if page_obj.has_previous %}
            <ul class="pagination-list">
                <li class="pagination-item">
                    <a
                            class="pagination-link"
                            href="?page=1"
                    >
                        First
                    </a>
                </li>
                <li class="pagination-item">
                    <a
                            class="pagination-link"
                            href="?page={{ page_obj.previous_page_number }}"
                    >
                        Previous
                    </a>
                </li>
            </ul>
        {% endif %}
        <ul class="pagination-list">
            {% for num in paginator_range %}
                <li class="pagination-item
            {% if num == page_obj.number %}
            pagination-item--active
            {% endif %}
            ">
                    {% if num == "â€¦" %}
                        {{ num }}
                    {% else %}
                        <a
                                class="pagination-link"
                                href="?page={{ num }}"
                        >
                            {{ num }}
                        </a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        {% if page_obj.has_next %}
            <ul class="pagination-list">
                <li class="pagination-item">
                    <a
                            class="pagination-link"
                            href="?page={{ page_obj.next_page_number }}"
                    >
                        Next
                    </a>
                </li>
                <li class="pagination-item
                    {% if page_obj.paginator.num_pages == page_obj.number %}
                        pagination-item--active
                    {% endif %}
                ">
                    <a
                            class="pagination-link"
                            href="?page={{ page_obj.paginator.num_pages }}"
                    >
                        Last
                    </a>
                </li>
            </ul>
        {% endif %}
    </nav>
{% endblock %}