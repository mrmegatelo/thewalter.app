{% extends 'layouts/with_sidebar.html' %}
{% load i18n %}

{% block title %}thewalter.app{% endblock %}

{% block sidebar %}
    <div class="feed-sidebar">
        <div class="sidebar-block sidebar-block-content">
            <a class="button button--ghost button--sm"
               href="{% url 'feed_index' %}">
                <span class="button__icon">{% include 'icons/home.svg' %}</span>
                {% translate 'Home' noop %}
            </a>
            <a class="button button--ghost button--sm"
               href="{% url 'favorites' %}">
                <span class="button__icon">{% include 'icons/favorite_filled.svg' %}</span>
                {% translate 'Favorites' noop %}
            </a>
            <form id="feed-types"
                  class="sidebar-block-content"
                  method="post"
                  hx-trigger="change"
                  hx-target="this"
                  hx-post="{% url 'api_feed_types' %}"
            >
                {% include 'blocks/feed/types_selector.html' %}
            </form>
        </div>
        <div class="sidebar-block">
            <h3 class="heading">{% translate 'Feeds' noop %}:</h3>
            <div class="sidebar-block-content">
                {% include 'blocks/feed/feeds_full.html' %}
            </div>
        </div>
        <div class="sidebar-block sidebar-block__sticky">
            <a class="button button--primary button--sm"
               href="{% url 'new_feed' %}"
            >
                <span class="button__icon">{% include 'icons/plus_circle.svg' %}</span>
                {% translate 'Add new source' noop %}
            </a>
        </div>
    </div>
{% endblock %}

{% block main %}
    <header class="feed-header">
        <div id="feed-description"
             class="feed-description"
        >
        </div>
        <div class="feed-list-filters">
            <h4 class="heading">{% translate 'Hide' noop %}:</h4>
            <form id="feed-filters"
                  class="button-group"
                  method="post"
                  hx-trigger="change"
                  hx-target="this"
                  hx-post="{% url 'api_feed_filters' %}"
            >
                {% include 'blocks/feed/filters.html' %}
            </form>
            <a class="button button--xs button--ghost" href="{% url 'feed_index' %}">
                {% translate 'Reset filters' noop %}
            </a>
        </div>
    </header>
    {% block feed_list %}{% endblock %}
{% endblock %}

{% block detail %}
    {% if feed_item_pk %}
        <article id="feed-detail"
                 hx-trigger="load"
                 hx-get="{% url 'api_feed_detail' pk=feed_item_pk %}"
        >
            {% include 'blocks/feed/loader.html' %}
        </article>
    {% else %}
        <article id="feed-detail"></article>
    {% endif %}
{% endblock %}